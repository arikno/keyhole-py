<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB Cluster Analysis Report</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom CSS -->
    <style>
        body {
            background-color: #f8f9fa;
        }
        
        .report-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }
        
        .metric-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
            transition: transform 0.2s;
        }
        
        .metric-card:hover {
            transform: translateY(-2px);
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #495057;
        }
        
        .metric-label {
            color: #6c757d;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .table-container {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
        }
        
        .table th {
            background-color: #f8f9fa;
            border-top: none;
            font-weight: 600;
            color: #495057;
        }
        
        .badge-cluster-type {
            font-size: 0.8rem;
            padding: 0.5rem 1rem;
        }
        
        .cluster-type-standalone { background-color: #28a745; }
        .cluster-type-replica { background-color: #007bff; }
        .cluster-type-sharded { background-color: #fd7e14; }
        
        .status-healthy { color: #28a745; }
        .status-warning { color: #ffc107; }
        .status-error { color: #dc3545; }
        
        .json-preview {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .collapsible-section {
            margin-bottom: 1rem;
        }
        
        .collapsible-header {
            background-color: #e9ecef;
            padding: 1rem;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .collapsible-header:hover {
            background-color: #dee2e6;
        }
        
        .collapsible-content {
            display: none;
            padding: 1rem;
            background-color: white;
            border: 1px solid #dee2e6;
            border-top: none;
            border-radius: 0 0 5px 5px;
        }
        
        .collapsible-content.show {
            display: block;
        }
        
        .progress-custom {
            height: 8px;
            border-radius: 4px;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin: 1rem 0;
        }
        
        .footer {
            background-color: #343a40;
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .loading {
            text-align: center;
            padding: 2rem;
            color: #6c757d;
        }
    </style>
    
    
</head>
<body>
    <!-- Header -->
    <div class="report-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="mb-0">
                        <i class="fas fa-database me-3"></i>
                        MongoDB Cluster Analysis Report
                    </h1>
                    <p class="mb-0 mt-2 opacity-75">
                        MongoDB v8.0.14  (Amazon Linux release 2 (Karoo)) mongod replica 2 cores 1849MB memory
                    </p>
                </div>
                <div class="col-md-4 text-end">
                    <div class="d-flex flex-column align-items-end">
                        <span class="badge bg-light text-dark px-3 py-2 mb-2">
                            Generated: 2025-10-05 15:29:56
                        </span>
                        
                        <span class="badge badge-cluster-type cluster-type-replica px-3 py-2">
                            Replica Cluster
                        </span>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        
<!-- Cluster Overview -->
<div class="row mb-4">
    <div class="col-12">
        <div class="metric-card">
            <h3 class="mb-4">
                <i class="fas fa-server me-2"></i>Cluster Overview
            </h3>
            <div class="row">
                <div class="col-md-3">
                    <div class="text-center">
                        <div class="metric-value status-warning">
                            Replica
                        </div>
                        <div class="metric-label">Cluster Type</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="text-center">
                        <div class="metric-value">8.0.14</div>
                        <div class="metric-label">MongoDB Version</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="text-center">
                        <div class="metric-value">0.2</div>
                        <div class="metric-label">Uptime (Days)</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="text-center">
                        <div class="metric-value">1500</div>
                        <div class="metric-label">Total Connections</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Performance Metrics -->
<div class="row mb-4">
    <div class="col-md-4">
        <div class="metric-card">
            <div class="text-center">
                <div class="metric-value">23.6</div>
                <div class="metric-label">Operations/Second</div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="metric-card">
            <div class="text-center">
                <div class="metric-value">0.0 GB</div>
                <div class="metric-label">Memory Usage</div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="metric-card">
            <div class="text-center">
                <div class="metric-value">0.1 GB</div>
                <div class="metric-label">Storage Size</div>
            </div>
        </div>
    </div>
</div>

<!-- Operation Counters -->
<div class="row mb-4">
    <div class="col-12">
        <div class="table-container">
            <h4 class="mb-3">
                <i class="fas fa-chart-bar me-2"></i>Operation Counters
            </h4>
            <div class="row">
                <div class="col-md-2">
                    <div class="text-center p-3">
                        <div class="metric-value text-primary">331764</div>
                        <div class="metric-label">Commands</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="text-center p-3">
                        <div class="metric-value text-success">41132</div>
                        <div class="metric-label">Inserts</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="text-center p-3">
                        <div class="metric-value text-info">3377</div>
                        <div class="metric-label">Queries</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="text-center p-3">
                        <div class="metric-value text-warning">0</div>
                        <div class="metric-label">Updates</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="text-center p-3">
                        <div class="metric-value text-danger">1742</div>
                        <div class="metric-label">Deletes</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="text-center p-3">
                        <div class="metric-value text-secondary">14575</div>
                        <div class="metric-label">Get More</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Database Analysis -->
<div class="row mb-4">
    <div class="col-12">
        <div class="table-container">
            <h4 class="mb-3">
                <i class="fas fa-database me-2"></i>Database Analysis
            </h4>
            <div class="table-responsive">
                <table class="table table-hover sortable">
                    <thead>
                        <tr>
                            <th data-sort="name">Database Name</th>
                            <th data-sort="size" class="text-end">Size on Disk</th>
                            <th data-sort="data_size" class="text-end">Data Size</th>
                            <th data-sort="index_size" class="text-end">Index Size</th>
                            <th data-sort="objects" class="text-end">Documents</th>
                            <th data-sort="indexes" class="text-end">Indexes</th>
                            <th data-sort="avg_obj_size" class="text-end">Avg Doc Size</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                        <tr>
                            <td data-name="sample_airbnb">
                                <strong>sample_airbnb</strong>
                                
                                <span class="badge bg-secondary ms-2">Empty</span>
                                
                            </td>
                            <td data-size="2052843.0" class="text-end">1.96 MB</td>
                            <td data-data-size="29419.0" class="text-end">28.73 KB</td>
                            <td data-index-size="2023424.0" class="text-end">1.93 MB</td>
                            <td data-objects="1" class="text-end">1</td>
                            <td data-indexes="6" class="text-end">6</td>
                            <td data-avg-obj-size="29419.0" class="text-end">28.73 KB</td>
                        </tr>
                        
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Collection Analysis -->
<div class="row mb-4">
    <div class="col-12">
        <div class="table-container">
            <h4 class="mb-3">
                <i class="fas fa-table me-2"></i>Collection Analysis
            </h4>
            <div class="table-responsive">
                <table class="table table-hover sortable">
                    <thead>
                        <tr>
                            <th data-sort="namespace">Namespace</th>
                            <th data-sort="count" class="text-end">Documents</th>
                            <th data-sort="size" class="text-end">Size</th>
                            <th data-sort="storage_size" class="text-end">Storage Size</th>
                            <th data-sort="index_size" class="text-end">Index Size</th>
                            <th data-sort="nindexes" class="text-end">Indexes</th>
                            <th data-sort="avg_obj_size" class="text-end">Avg Doc Size</th>
                            <th>Features</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                        <tr>
                            <td data-namespace="sample_airbnb.listingsAndReviews">
                                <strong>sample_airbnb.listingsAndReviews</strong>
                            </td>
                            <td data-count="1" class="text-end">1</td>
                            <td data-size="29419" class="text-end">28.73 KB</td>
                            <td data-storage-size="55906304" class="text-end">53.32 MB</td>
                            <td data-index-size="2023424" class="text-end">1.93 MB</td>
                            <td data-nindexes="6" class="text-end">6</td>
                            <td data-avg-obj-size="29419" class="text-end">28.73 KB</td>
                            <td>
                                
                                
                            </td>
                        </tr>
                        
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Detailed Collection Information -->

<div class="row mb-4">
    <div class="col-12">
        <div class="table-container">
            <h4 class="mb-3">
                <i class="fas fa-list me-2"></i>Detailed Collection Information
            </h4>
            
            <div class="collapsible-section">
                <div class="collapsible-header">
                    <div>
                        <strong>sample_airbnb.listingsAndReviews</strong>
                        <span class="badge bg-primary ms-2">1 docs</span>
                        <span class="badge bg-secondary ms-1">6 indexes</span>
                    </div>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="collapsible-content">
                    <!-- Collection Structure Analysis -->
                    
                    <div class="row mb-3">
                        <div class="col-12">
                            <h6>Collection Structure Analysis</h6>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="text-center p-2">
                                        <div class="metric-value text-success">
                                            3
                                        </div>
                                        <div class="metric-label">Max Nesting Depth</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="text-center p-2">
                                        <div class="metric-value text-success">
                                            51
                                        </div>
                                        <div class="metric-label">Max Array Size</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="text-center p-2">
                                        <div class="metric-value text-warning">86</div>
                                        <div class="metric-label">Total Fields</div>
                                        <small class="text-muted">(Arrays as single fields)</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="text-center p-2">
                                        <div class="metric-value text-info">386</div>
                                        <div class="metric-label">Queryable Paths</div>
                                        <small class="text-muted">(Includes array indices)</small>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="text-center p-2">
                                        <div class="metric-value text-secondary">3.0</div>
                                        <div class="metric-label">Avg Nesting Depth</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="text-center p-2">
                                        <div class="metric-value text-danger">
                                            99.95%
                                        </div>
                                        <div class="metric-label">Fragmentation</div>
                                        <small class="text-muted">(critical)</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="text-center p-2">
                                        <div class="metric-value text-info">0.1%</div>
                                        <div class="metric-label">Storage Efficiency</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="text-center p-2">
                                        <div class="metric-value text-secondary">53.29 MB</div>
                                        <div class="metric-label">Wasted Space</div>
                                    </div>
                                </div>
                            </div>
                            
                            
                            <div class="alert alert-warning mt-2">
                                <strong>Issues Found:</strong>
                                <ul class="mb-0">
                                    
                                    <li>High field count (86)</li>
                                    
                                    <li>Critical fragmentation detected (99.95% wasted space)</li>
                                    
                                </ul>
                            </div>
                            
                            
                            
                            <div class="alert alert-info mt-2">
                                <strong>Recommendations:</strong>
                                <ul class="mb-0">
                                    
                                    <li>Consider document schema optimization</li>
                                    
                                    <li>Consider compacting the collection to reclaim space</li>
                                    
                                    <li>Review data deletion patterns and consider archiving old data</li>
                                    
                                </ul>
                            </div>
                            
                            
                            <!-- Fragmentation Explanation -->
                            
                            <div class="alert alert-light mt-2">
                                <strong>Fragmentation Analysis:</strong>
                                <p class="mb-1">
                                    <strong>Fragmentation</strong> measures wasted space due to document updates, deletions, and storage engine overhead.
                                </p>
                                <p class="mb-1">
                                    <strong>Calculation:</strong> Fragmentation = (Storage Size - Data Size) / Storage Size × 100%
                                </p>
                                <p class="mb-0">
                                    <strong>Storage Efficiency:</strong> 0.05% of allocated space contains actual data.
                                    
                                    <span class="text-danger">Critical fragmentation detected - consider compaction.</span>
                                    
                                </p>
                            </div>
                            
                            
                            
                            
                            
                        </div>
                    </div>
                    
                    
                    <div class="row">
                        <!-- Enhanced Index Analysis -->
                        <div class="col-md-6">
                            <h6>Index Analysis</h6>
                            
                            <div class="table-responsive">
                                <table class="table table-sm">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Key</th>
                                            <th>Usage</th>
                                            <th>Issues</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <tr class="">
                                            <td>
                                                _id_
                                                
                                                
                                                
                                            </td>
                                            <td>
                                                <code>{_id: 1}</code>
                                            </td>
                                            <td>
                                                
                                                <span class="badge bg-success">6 ops</span>
                                                
                                            </td>
                                            <td>
                                                
                                                <small class="text-success">OK</small>
                                                
                                            </td>
                                        </tr>
                                        
                                        <tr class="">
                                            <td>
                                                address.location_2dsphere
                                                
                                                
                                                
                                            </td>
                                            <td>
                                                <code>{address.location: 2dsphere}</code>
                                            </td>
                                            <td>
                                                
                                                <span class="badge bg-danger">Unused</span>
                                                
                                            </td>
                                            <td>
                                                
                                                <small class="text-warning">Unused index</small>
                                                
                                            </td>
                                        </tr>
                                        
                                        <tr class="">
                                            <td>
                                                first_review_1
                                                
                                                <span class="badge bg-info ms-1">TTL</span>
                                                
                                                
                                                
                                            </td>
                                            <td>
                                                <code>{first_review: 1}</code>
                                            </td>
                                            <td>
                                                
                                                <span class="badge bg-danger">Unused</span>
                                                
                                            </td>
                                            <td>
                                                
                                                <small class="text-warning">Unused index</small>
                                                
                                            </td>
                                        </tr>
                                        
                                        <tr class="">
                                            <td>
                                                name_1
                                                
                                                
                                                
                                            </td>
                                            <td>
                                                <code>{name: 1}</code>
                                            </td>
                                            <td>
                                                
                                                <span class="badge bg-success">2 ops</span>
                                                
                                            </td>
                                            <td>
                                                
                                                <small class="text-success">OK</small>
                                                
                                            </td>
                                        </tr>
                                        
                                        <tr class="">
                                            <td>
                                                property_type_1_room_type_1_beds_1
                                                
                                                
                                                
                                            </td>
                                            <td>
                                                <code>{property_type: 1, room_type: 1, beds: 1}</code>
                                            </td>
                                            <td>
                                                
                                                <span class="badge bg-success">2 ops</span>
                                                
                                            </td>
                                            <td>
                                                
                                                <small class="text-success">OK</small>
                                                
                                            </td>
                                        </tr>
                                        
                                        <tr class="table-warning">
                                            <td>
                                                property_type_-1
                                                
                                                
                                                
                                                <span class="badge bg-danger ms-1">Redundant</span>
                                                
                                            </td>
                                            <td>
                                                <code>{property_type: -1}</code>
                                            </td>
                                            <td>
                                                
                                                <span class="badge bg-success">2 ops</span>
                                                
                                            </td>
                                            <td>
                                                
                                                <small class="text-warning">Redundant prefix of compound index property_type_1_room_type_1_beds_1</small>
                                                
                                            </td>
                                        </tr>
                                        
                                    </tbody>
                                </table>
                            </div>
                            
                        </div>
                        
                        <!-- Sample Documents -->
                        <div class="col-md-6">
                            <h6>Sample Documents</h6>
                            
                            <div class="json-preview">
                                
                                <div class="mb-2">
                                    <strong>Document 1:</strong>
                                    <pre class="mb-1">{
  "_id": "10006546",
  "listing_url": "https://www.airbnb.com/rooms/10006546",
  "name": "Ribeira Charming Duplex",
  "summary": "Fantastic duplex apartment with three bedrooms, located in the historic area of Porto, Ribeira (Cube) - UNESCO World Heritage Site. Centenary building fully rehabilitated, without losing their original character.",
  "space": "Privileged views of the Douro River and Ribeira square, our apartment offers the perfect conditions to discover the history and the charm of Porto. Apartment comfortable, charming, romantic and cozy in the heart of Ribeira. Within walking distance of all the most emblematic places of the city of Porto. The apartment is fully equipped to host 8 people, with cooker, oven, washing machine, dishwasher, microwave, coffee machine (Nespresso) and kettle. The apartment is located in a very typical area of the city that allows to cross with the most picturesque population of the city, welcoming, genuine and happy people that fills the streets... (truncated)</pre>
                                </div>
                                
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </div>
</div>


<!-- Replica Set Information -->

<div class="row mb-4">
    <div class="col-12">
        <div class="table-container">
            <h4 class="mb-3">
                <i class="fas fa-network-wired me-2"></i>Replica Set Status
            </h4>
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Member</th>
                            <th>State</th>
                            <th>Health</th>
                            <th>Uptime</th>
                            <th>Last Heartbeat</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                        <tr>
                            <td><strong>atlas-ncmcuo-shard-00-00.c6mru.mongodb.net:27017</strong></td>
                            <td>
                                <span class="badge bg-primary">
                                    SECONDARY
                                </span>
                            </td>
                            <td>
                                <span class="badge bg-success">
                                    Healthy
                                </span>
                            </td>
                            <td>16625s</td>
                            <td>2025-10-05 12:29:54</td>
                        </tr>
                        
                        <tr>
                            <td><strong>atlas-ncmcuo-shard-00-01.c6mru.mongodb.net:27017</strong></td>
                            <td>
                                <span class="badge bg-success">
                                    PRIMARY
                                </span>
                            </td>
                            <td>
                                <span class="badge bg-success">
                                    Healthy
                                </span>
                            </td>
                            <td>16703s</td>
                            <td>2025-10-05 15:29:56</td>
                        </tr>
                        
                        <tr>
                            <td><strong>atlas-ncmcuo-shard-00-02.c6mru.mongodb.net:27017</strong></td>
                            <td>
                                <span class="badge bg-primary">
                                    SECONDARY
                                </span>
                            </td>
                            <td>
                                <span class="badge bg-success">
                                    Healthy
                                </span>
                            </td>
                            <td>16625s</td>
                            <td>2025-10-05 12:29:55</td>
                        </tr>
                        
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<!-- Sharding Information -->


<!-- Cluster Health Analysis -->

<div class="row mb-4">
    <div class="col-12">
        <div class="table-container">
            <h4 class="mb-3">
                <i class="fas fa-heartbeat me-2"></i>Cluster Health Analysis
            </h4>
            <div class="row align-items-center mb-3">
                <div class="col-md-6">
                    <div class="d-flex align-items-center">
                        <span class="badge bg-success px-3 py-2 me-3">
                            Healthy Status
                        </span>
                        <small class="text-muted">2025-10-05 15:29:55</small>
                    </div>
                </div>
                <div class="col-md-6 text-end">
                    
                    <small class="text-muted">
                        Memory: 484MB | 
                        Connections: 63 | 
                        Operations: 394983
                    </small>
                    
                </div>
            </div>
            
            
            
            
            
            
            <div class="alert alert-success">
                <i class="fas fa-check-circle me-2"></i>No issues detected. Cluster is running optimally.
            </div>
            
        </div>
    </div>
</div>


<!-- System Information -->
<div class="row mb-4">
    <div class="col-12">
        <div class="table-container">
            <h4 class="mb-3">
                <i class="fas fa-info-circle me-2"></i>System Information
            </h4>
            <div class="row">
                <div class="col-md-6">
                    <table class="table table-sm">
                        <tr>
                            <td><strong>Hostname:</strong></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td><strong>OS:</strong></td>
                            <td>Amazon Linux release 2 (Karoo) (Linux)</td>
                        </tr>
                        <tr>
                            <td><strong>CPU Architecture:</strong></td>
                            <td>aarch64</td>
                        </tr>
                        <tr>
                            <td><strong>CPU Cores:</strong></td>
                            <td>2</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-6">
                    <table class="table table-sm">
                        <tr>
                            <td><strong>Memory Size:</strong></td>
                            <td>1849 MB</td>
                        </tr>
                        <tr>
                            <td><strong>Memory Limit:</strong></td>
                            <td>1849 MB</td>
                        </tr>
                        <tr>
                            <td><strong>Storage Engine:</strong></td>
                            <td>wiredTiger</td>
                        </tr>
                        <tr>
                            <td><strong>Process:</strong></td>
                            <td>mongod</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>Keyhole Python</h5>
                    <p class="mb-0">MongoDB Cluster Analysis Tool</p>
                    <small class="text-muted">Version 1.0.0</small>
                </div>
                <div class="col-md-6 text-end">
                    <p class="mb-0">
                        <small class="text-muted">
                            Report generated on 2025-10-05 15:29:56<br>
                            Host:  | MongoDB Version: 8.0.14
                        </small>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    
    <!-- Custom JavaScript -->
    <script>
        // Collapsible sections
        document.addEventListener('DOMContentLoaded', function() {
            const collapsibleHeaders = document.querySelectorAll('.collapsible-header');
            
            collapsibleHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const content = this.nextElementSibling;
                    const icon = this.querySelector('i');
                    
                    if (content.classList.contains('show')) {
                        content.classList.remove('show');
                        icon.style.transform = 'rotate(0deg)';
                    } else {
                        content.classList.add('show');
                        icon.style.transform = 'rotate(180deg)';
                    }
                });
            });
            
            // Table sorting
            const sortableTables = document.querySelectorAll('table.sortable');
            sortableTables.forEach(table => {
                const headers = table.querySelectorAll('th[data-sort]');
                headers.forEach(header => {
                    header.style.cursor = 'pointer';
                    header.innerHTML += ' <i class="fas fa-sort"></i>';
                    
                    header.addEventListener('click', function() {
                        const column = this.dataset.sort;
                        const tbody = table.querySelector('tbody');
                        const rows = Array.from(tbody.querySelectorAll('tr'));
                        
                        const sortedRows = rows.sort((a, b) => {
                            const aVal = a.querySelector(`[data-${column}]`)?.dataset[column] || '';
                            const bVal = b.querySelector(`[data-${column}]`)?.dataset[bVal] || '';
                            
                            if (isNaN(aVal) || isNaN(bVal)) {
                                return aVal.localeCompare(bVal);
                            }
                            return parseFloat(aVal) - parseFloat(bVal);
                        });
                        
                        tbody.innerHTML = '';
                        sortedRows.forEach(row => tbody.appendChild(row));
                    });
                });
            });
        });
        
        // Format numbers
        function formatNumber(num) {
            if (num >= 1000000000) {
                return (num / 1000000000).toFixed(1) + 'B';
            } else if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }
        
        // Format bytes
        function formatBytes(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
    </script>
    
    
</body>
</html>